{"is_source_file": true, "format": "Python", "description": "Main API implementation for the Notes backend, defining CRUD endpoints, database initialization, and data models using FastAPI, SQLAlchemy, and Pydantic.", "external_files": ["os", "datetime", "typing", "uuid", "fastapi", "pydantic", "sqlalchemy"], "external_methods": ["os.getenv", "datetime.now", "uuid.UUID", "fastapi.Depends", "fastapi.FastAPI", "fastapi.HTTPException", "fastapi.Path", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "sqlalchemy.create_engine", "sqlalchemy.text", "sqlalchemy.orm.declarative_base", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.Session"], "published": ["health_check", "list_notes", "create_note", "get_note", "update_note", "delete_note", "websocket_info"], "classes": [{"name": "NoteORM", "description": "SQLAlchemy ORM model representing the 'notes' table with fields for id, title, content, created_at, and updated_at."}], "methods": [{"name": "None init_db()", "description": "Initializes the database, ensuring extensions and tables exist.", "scope": "", "scopeKind": ""}, {"name": "Session get_db()", "description": "FastAPI dependency that provides a database session.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Endpoint to check the health/status of the API.", "scope": "", "scopeKind": ""}, {"name": "list_notes(db: Session = Depends(get_db))", "description": "Retrieves all notes ordered by update time.", "scope": "", "scopeKind": ""}, {"name": "create_note(payload: NoteCreate, db: Session = Depends(get_db))", "description": "Creates a new note with provided title and content.", "scope": "", "scopeKind": ""}, {"name": "get_note( note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )", "description": "Fetches a specific note by its UUID.", "scope": "", "scopeKind": ""}, {"name": "update_note( payload: NoteUpdate, note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )", "description": "Updates the title and/or content of an existing note.", "scope": "", "scopeKind": ""}, {"name": "delete_note( note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )", "description": "Deletes a note by UUID.", "scope": "", "scopeKind": ""}, {"name": "websocket_info()", "description": "Provides information about WebSocket usage (none in this API).", "scope": "", "scopeKind": ""}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["engine.begin", "conn.exec_driver_sql", "db.query", "db.add", "db.flush", "db.execute", "db.commit", "db.refresh", "db.get", "db.delete"], "search-terms": ["notes_backend src api main.py", "CRUD endpoints", "FastAPI notes API", "SQLAlchemy ORM model", "database initialization", "UUID primary key", "create_engine", "init_db", "Note ORM class"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "634d887f1bc785d8b06b2fe4637b8671b7e235ee", "revision_history": [{"8": "634d887f1bc785d8b06b2fe4637b8671b7e235ee"}, {"10": "634d887f1bc785d8b06b2fe4637b8671b7e235ee"}], "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^DATABASE_URL = os.getenv($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^class Note(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteORM", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^class NoteORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PG_UUID", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^from sqlalchemy.dialects.postgresql import UUID as PG_UUID$/", "language": "Python", "kind": "unknown", "nameref": "unknown:UUID"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"notes\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    content = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    content: Optional[str] = Field(None, description=\"Updated content of the note\", min_length=1/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Content of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Content of the note\", min_length=1)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: NoteCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Creation timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def delete_note($/", "language": "Python", "kind": "function", "signature": "( note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^engine = create_engine(DATABASE_URL, pool_pre_ping=True, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "frontend_origins", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^frontend_origins = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def get_db() -> Session:$/", "language": "Python", "typeref": "typename:Session", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def get_note($/", "language": "Python", "kind": "function", "signature": "( note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    id = Column(PG_UUID(as_uuid=True), primary_key=True, server_default=text(\"gen_random_uuid()\"/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    id: UUID = Field(..., description=\"Unique identifier of the note\")$/", "language": "Python", "typeref": "typename:UUID", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def list_notes(db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    title = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, description=\"Updated title of the note\", min_length=1)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the note\", min_length=1)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def update_note($/", "language": "Python", "kind": "function", "signature": "( payload: NoteUpdate, note_id: UUID = Path(..., description=\"Note ID\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    updated_at = Column(DateTime(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "NoteORM", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last updated timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "websocket_info", "path": "/home/kavia/workspace/code-generation/simple-notes-app-50716-50726/notes_backend/src/api/main.py", "pattern": "/^def websocket_info():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "ce9eeb580970b8cd67089c7bb1a29cd5", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"notes\"", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "content = Column(Text, nullable=False)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime(timezone=True), nullable=False, server_default=text(\"NOW()\"))", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, pool_pre_ping=True, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "frontend_origins = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "id = Column(PG_UUID(as_uuid=True), primary_key=True, server_default=text(\"gen_random_uuid()\"/", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "UUID id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "title = Column(Text, nullable=False)", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime(timezone=True), nullable=False, server_default=text(\"NOW()\"))", "scope": "NoteORM", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}]}